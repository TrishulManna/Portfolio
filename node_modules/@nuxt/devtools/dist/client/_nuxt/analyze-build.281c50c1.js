import{d as R,a as V,r as S,o,m as i,k as e,F as c,n as E,G as F,f as t,t as m,p as b,H as G,i as r,j as a,v as _,I as A,J as D,K as P,L as U,_ as L,M as X,N as ee,O as ne,P as te,Q as oe,R as le,S as ie,U as k,h as w,l as j,V as se,W as ae,A as re}from"./entry.e01776ec.js";import{_ as ue}from"./FilepathItem.vue.5af0b5df.js";import{_ as de}from"./NTip.vue.770a171a.js";import{_ as ce}from"./NCodeBlock.vue.adf1e9b4.js";import{_ as me}from"./NCheckbox.vue.6fb2ece1.js";import{_ as _e}from"./HelpFab.vue.98c902f4.js";import"./client.3f2665f1.js";const pe={"h-full":"",grid:"~ rows-[max-content_1fr]"},fe={flex:"~ wrap","w-full":""},ve=["onClick"],he=e("div",{border:"b base","flex-auto":""},null,-1),ye={key:0,flex:"~ col gap-4 items-center justify-center",p4:""},be=e("div",{"flex-auto":""},null,-1),$e={grid:"~ cols-[30px_1fr] gap-x-2 gap-y-3 items-center justify-center","w-100":""},xe=e("div",{"i-carbon-commit":"","text-xl":""},null,-1),ge=e("div",{"text-sm":"",op50:""}," Name ",-1),we=e("div",{"i-carbon-time":"","text-xl":""},null,-1),ze=e("div",{"text-sm":"",op50:""}," Build duration ",-1),Be=e("div",{"i-carbon-cics-program":"","text-xl":""},null,-1),ke=e("div",{"text-sm":"",op50:""}," Client bundle size ",-1),Ce=e("div",{"i-carbon-bare-metal-server":"","text-xl":""},null,-1),Ne=e("div",{"text-sm":"",op50:""}," Nitro bundle size ",-1),Te=e("div",{"i-carbon-edge-node":"","text-xl":""},null,-1),Ae=e("div",{"text-sm":"",op50:""}," Built ",-1),De=e("div",{"i-carbon:folder-parent":"","text-xl":""},null,-1),Ie=e("div",{"text-sm":"",op50:""}," Report Path ",-1),Ve=e("div",{"flex-auto":""},null,-1),I="/__nuxt_devtools__/analyze/",Se=R({__name:"BuildAnalyzeDetails",props:{current:{},prev:{}},setup(C){const p=C,f=V(()=>{const n=[{name:"Overview",id:"overview"}];return p.current.features.bundleClient&&n.push({name:"Client Bundle",id:"bundle-client"}),p.current.features.bundleNitro&&n.push({name:"Nitro Bundle",id:"bundle-nitro"}),p.current.features.viteInspect&&n.push({name:"Vite Inspect",id:"vite-inspect"}),n}),l=S(f.value[0]);function $(n){return n<1024?`${n}B`:n<1024*1024?`${(n/1024).toFixed(1)}KB`:n<1024*1024*1024?`${(n/1024/1024).toFixed(1)}MB`:`${(n/1024/1024/1024).toFixed(1)}GB`}function g(n){return`${((n.endTime-n.startTime)/1e3).toFixed(1)}s`}async function x(n){return P.clearAnalyzeBuilds(await U(),[n])}return(n,u)=>{const z=ue,N=L;return o(),i("div",pe,[e("div",fe,[(o(!0),i(c,null,E(t(f),(v,T)=>(o(),i("button",{key:T,px4:"",py2:"",border:"r base",hover:"bg-active",class:F(v.id===t(l).id?"":"border-b"),onClick:d=>l.value=v},[e("div",{class:F(v.id===t(l).id?"":"op30")},m(v.name),3)],10,ve))),128)),he]),t(l).id==="overview"?(o(),i("div",ye,[be,e("div",$e,[xe,e("div",null,[ge,e("div",null,m(n.current.name),1)]),we,e("div",null,[ze,e("div",null,m(g(n.current)),1)]),n.current.size?.clientBundle?(o(),i(c,{key:0},[Be,e("div",null,[ke,e("div",null,m($(n.current.size.clientBundle)),1)])],64)):b("",!0),n.current.size.nitroBundle?(o(),i(c,{key:1},[Ce,e("div",null,[Ne,e("div",null,m($(n.current.size.nitroBundle)),1)])],64)):b("",!0),Te,e("div",null,[Ae,e("div",null,m(t(G)(new Date(n.current.endTime))),1)]),De,e("div",null,[Ie,r(z,{filepath:n.current.analyzeDir},null,8,["filepath"])])]),Ve,r(N,{n:"rose",icon:"carbon-delete",onClick:u[0]||(u[0]=v=>x(n.current.name))},{default:a(()=>[_(" Delete this report ")]),_:1})])):b("",!0),u._lazyshow1||t(l).id==="bundle-client"?(u._lazyshow1=!0,o(),i(c,null,[A(e("iframe",{src:`${I}${n.current.slug}/client.html`,"h-full":"","w-full":""},null,8,["src"]),[[D,t(l).id==="bundle-client"]])],64)):b("v-show-if",!0),u._lazyshow2||t(l).id==="bundle-nitro"?(u._lazyshow2=!0,o(),i(c,null,[A(e("iframe",{src:`${I}${n.current.slug}/nitro.html`,"h-full":"","w-full":""},null,8,["src"]),[[D,t(l).id==="bundle-nitro"]])],64)):b("v-show-if",!0),u._lazyshow3||t(l).id==="vite-inspect"?(u._lazyshow3=!0,o(),i(c,null,[A(e("iframe",{src:`${I}${n.current.slug}/.vite-inspect/`,"h-full":"","w-full":""},null,8,["src"]),[[D,t(l).id==="vite-inspect"]])],64)):b("v-show-if",!0)])}}}),Fe={class:"markdown-body"},Pe=e("h1",null,"Build Analyze",-1),je=e("p",null,[_("DevTools provides a build analyze tool to help you understand the size of your app in production. Whenever you start a new build, it runs the command "),e("code",null,"nuxt build --analyze"),_(" and present the output data directly in DevTools for easy browsing and comparing.")],-1),Re=[Pe,je],Ee={__name:"analyze-build",setup(C,{expose:p}){return p({frontmatter:{}}),(l,$)=>(o(),i("div",Fe,Re))}},Ge={flex:"~ col"},Ue=["onClick"],Le={flex:"~ gap-1 items-center wrap","w-full":"","text-sm":"",op60:""},Oe=e("div",{"i-carbon-time":""},null,-1),He=e("div",{"flex-auto":""},null,-1),Ke=e("div",{"x-divider":""},null,-1),Me={flex:"~ items-center justify-center wrap",p4:""},We={flex:"~ col gap-1","w-250":"",p4:""},Je=e("h3",{class:"text-lg font-medium leading-6",mb2:""}," Start analyze build? ",-1),Qe=e("p",{op50:""}," Enter the name of the build: ",-1),Ye=e("div",{my3:"","x-divider":""},null,-1),Ze=e("p",{op50:""}," The following command will be executed in your terminal: ",-1),qe={flex:"~ gap-3",mt2:"","justify-end":""},an=R({__name:"analyze-build",setup(C){const p=X(),f=ee(),l=ne(),$=te("analyze-build:slug",""),g=V(()=>f.value?.builds.find(d=>d.slug===$.value)??f.value?.builds[0]),x=S(!1),n=S(""),u=V(()=>f.value?.builds.some(d=>d.name===n.value.trim()));async function z(){n.value=await P.generateAnalyzeBuildName(),await p.start()&&(k.value={name:n.value,processId:await P.startAnalyzeBuild(await U(),n.value)},x.value&&v())}const N=oe();function v(){k.value?.processId&&(N.value=k.value.processId,l.push("/modules/terminals"))}function T(d){return`${((d.endTime-d.startTime)/1e3).toFixed(1)}s`}return le(()=>[{id:"action:analyze-build: start",title:"Start a new analyze build",icon:"i-carbon-edge-node",action:z}]),(d,h)=>{const B=L,O=Se,H=re,K=ie,M=se,W=de,J=ce,Q=me,Y=ae,Z=Ee,q=_e;return o(),i(c,null,[r(K,{"left-size":30},{left:a(()=>[e("div",Ge,[(o(!0),i(c,null,E(t(f)?.builds,s=>(o(),i(c,{key:s.slug},[e("button",{flex:"~ col gap1","hover:bg-active":"",p3:"",class:F(s.slug===t(g)?.slug?"text-primary bg-active":""),onClick:y=>$.value=s.slug},[e("code",null,m(s.name),1),e("div",Le,[Oe,e("span",null,m(T(s)),1),He,e("span",null,m(t(G)(new Date(s.endTime))),1)])],10,Ue),Ke],64))),128)),e("div",Me,[("processAnalyzeBuildInfo"in d?d.processAnalyzeBuildInfo:t(k))?(o(),w(B,{key:1,n:"primary",icon:"carbon-circle-dash animate-spin",onClick:h[1]||(h[1]=s=>v())},{default:a(()=>[_(" Building... ")]),_:1})):(o(),w(B,{key:0,n:"primary",icon:"carbon-edge-node",onClick:h[0]||(h[0]=s=>z())},{default:a(()=>[_(" Start a new build ")]),_:1}))])])]),right:a(()=>[t(g)?(o(),w(O,{key:0,current:t(g)},null,8,["current"])):(o(),w(H,{key:1}))]),_:1}),r(t(p),null,{default:a(({resolve:s})=>[r(Y,{"model-value":!0,onClose:y=>s(!1)},{default:a(()=>[e("div",We,[Je,Qe,r(M,{modelValue:t(n),"onUpdate:modelValue":h[2]||(h[2]=y=>j(n)?n.value=y:null),placeholder:"Build name"},null,8,["modelValue"]),t(u)?(o(),w(W,{key:0,"n-orange":""},{default:a(()=>[_(" A build with the same name already exists, continue would overrides the previous build result. ")]),_:1})):b("",!0),Ye,Ze,r(J,{code:`npx nuxi analyze --no-serve --name=${t(n)}`,lang:"bash",px4:"",py2:"",border:"~ base rounded",lines:!1},null,8,["code"]),r(Q,{modelValue:t(x),"onUpdate:modelValue":h[3]||(h[3]=y=>j(x)?x.value=y:null),mt2:"",n:"primary"},{default:a(()=>[_(" Navigate to terminal ")]),_:1},8,["modelValue"]),e("div",qe,[r(B,{onClick:y=>s(!1)},{default:a(()=>[_(" Cancel ")]),_:2},1032,["onClick"]),r(B,{n:"solid primary",onClick:y=>s(!0)},{default:a(()=>[_(" Start ")]),_:2},1032,["onClick"])])])]),_:2},1032,["onClose"])]),_:1}),r(q,null,{default:a(()=>[r(Z)]),_:1})],64)}}});export{an as default};
